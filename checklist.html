<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Checklist | OHS CSS App</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="main-wrapper">
  <!-- Header -->
  <header class="header small-header">
    <div class="header-container">
      <h1 class="header-title">Occupational Health and Safety Procedures - CSS</h1>
    </div>
  </header>
    <div id="greeting" class="greeting-block" style="display:flex;justify-content:center;">
      <!-- Greeting will be injected here -->
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <div class="intro-block">
      <h2 class="main-title">Safety Checklist</h2>
      <p class="main-desc">Track and complete all safety procedures for Computer System Servicing.</p>
    </div>

    <!-- Progress Bar -->
    <div class="progress-block">
      <div class="progress-labels">
        <span class="progress-label">Checklist Progress</span>
        <span id="checklist-progress" class="progress-value">0/24</span>
      </div>
      <div class="progress-bar-bg">
        <div id="checklist-progress-bar" class="progress-bar" style="width:0%"></div>
      </div>
    </div>

    <!-- Checklist Items -->
    <div class="checklist-category-list">

      <!-- General Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">General Safety</h3>
        <div class="category-items">
          <div class="checklist-item">
            <input type="checkbox" id="check-1" class="custom-checkbox" data-category="general">
            <label for="check-1" class="checklist-label">Wear appropriate personal protective equipment (PPE)</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-2" class="custom-checkbox mr-3" data-category="general">
            <label for="check-2" class="text-gray-700 dark:text-gray-300">Keep work area clean, dry, and organized</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-3" class="custom-checkbox mr-3" data-category="general">
            <label for="check-3" class="text-gray-700 dark:text-gray-300">Use correct lifting techniques when handling heavy equipment</label>
          </div>
        </div>
      </div>

      <!-- Electrical Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Electrical Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-4" class="custom-checkbox mr-3" data-category="electrical">
            <label for="check-4" class="text-gray-700 dark:text-gray-300">Disconnect power before working on equipment</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-5" class="custom-checkbox mr-3" data-category="electrical">
            <label for="check-5" class="text-gray-700 dark:text-gray-300">Use anti-static wrist strap or mat when handling components</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-6" class="custom-checkbox mr-3" data-category="electrical">
            <label for="check-6" class="text-gray-700 dark:text-gray-300">Inspect cables and plugs for damage before use</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-7" class="custom-checkbox mr-3" data-category="electrical">
            <label for="check-7" class="text-gray-700 dark:text-gray-300">Avoid overloading outlets and extension cords</label>
          </div>
        </div>
      </div>

      <!-- Tool Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Tool Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-8" class="custom-checkbox mr-3" data-category="tools">
            <label for="check-8" class="text-gray-700 dark:text-gray-300">Use tools only for their intended purpose</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-9" class="custom-checkbox mr-3" data-category="tools">
            <label for="check-9" class="text-gray-700 dark:text-gray-300">Keep cutting tools sharp and in good condition</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-10" class="custom-checkbox mr-3" data-category="tools">
            <label for="check-10" class="text-gray-700 dark:text-gray-300">Store tools safely when not in use</label>
          </div>
        </div>
      </div>

      <!-- Fire Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Fire Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-11" class="custom-checkbox mr-3" data-category="fire">
            <label for="check-11" class="text-gray-700 dark:text-gray-300">Keep flammable materials away from heat sources</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-12" class="custom-checkbox mr-3" data-category="fire">
            <label for="check-12" class="text-gray-700 dark:text-gray-300">Ensure fire extinguishers are accessible and inspected</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-13" class="custom-checkbox mr-3" data-category="fire">
            <label for="check-13" class="text-gray-700 dark:text-gray-300">Never use water on electrical fires</label>
          </div>
        </div>
      </div>

      <!-- Ergonomic Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Ergonomic Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-14" class="custom-checkbox mr-3" data-category="ergonomic">
            <label for="check-14" class="text-gray-700 dark:text-gray-300">Adjust workstation to maintain proper posture</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-15" class="custom-checkbox mr-3" data-category="ergonomic">
            <label for="check-15" class="text-gray-700 dark:text-gray-300">Take regular breaks to prevent eye strain and fatigue</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-16" class="custom-checkbox mr-3" data-category="ergonomic">
            <label for="check-16" class="text-gray-700 dark:text-gray-300">Use proper seating and monitor positioning</label>
          </div>
        </div>
      </div>

      <!-- Chemical Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Chemical Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-17" class="custom-checkbox mr-3" data-category="chemical">
            <label for="check-17" class="text-gray-700 dark:text-gray-300">Store solvents and chemicals in labeled containers</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-18" class="custom-checkbox mr-3" data-category="chemical">
            <label for="check-18" class="text-gray-700 dark:text-gray-300">Wear gloves and masks when handling hazardous substances</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-19" class="custom-checkbox mr-3" data-category="chemical">
            <label for="check-19" class="text-gray-700 dark:text-gray-300">Dispose of chemical waste properly</label>
          </div>
        </div>
      </div>

      <!-- Psychological Safety -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Psychological Safety</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-20" class="custom-checkbox mr-3" data-category="psychological">
            <label for="check-20" class="text-gray-700 dark:text-gray-300">Manage workload to reduce stress and fatigue</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-21" class="custom-checkbox mr-3" data-category="psychological">
            <label for="check-21" class="text-gray-700 dark:text-gray-300">Take scheduled breaks to maintain focus</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-22" class="custom-checkbox mr-3" data-category="psychological">
            <label for="check-22" class="text-gray-700 dark:text-gray-300">Seek support when dealing with challenging tasks</label>
          </div>
        </div>
      </div>

      <!-- Emergency Preparedness -->
      <div class="feature-card checklist-category">
        <h3 class="feature-title">Emergency Preparedness</h3>
        <div class="category-items">
          <div class="flex items-center">
            <input type="checkbox" id="check-23" class="custom-checkbox mr-3" data-category="emergency">
            <label for="check-23" class="text-gray-700 dark:text-gray-300">Know the location of fire exits and assembly points</label>
          </div>
          <div class="flex items-center">
            <input type="checkbox" id="check-24" class="custom-checkbox mr-3" data-category="emergency">
            <label for="check-24" class="text-gray-700 dark:text-gray-300">Be trained in basic first aid and fire extinguisher use</label>
          </div>
        </div>
      </div>

    </div>

    <!-- Move reset button to bottom -->
    <div style="width:100%; display:flex; justify-content:center; margin-top:2rem;">
      <button id="reset-btn" class="button reset-btn">Reset</button>
    </div>
  </main>

  <!-- Mobile Icon Navigation Bar -->
  <nav class="bottom-nav">
    <a href="home.html" class="nav-link">
      <img src="src/home.png" alt="Home" class="nav-img">
      <span class="nav-label">Home</span>
    </a>
    <a href="lessons.html" class="nav-link">
      <img src="src/book.png" alt="Lessons" class="nav-img">
      <span class="nav-label">Lessons</span>
    </a>
    <a href="checklist.html" class="nav-link active">
      <img src="src/checklist1.png" alt="Checklist" class="nav-img">
      <span class="nav-label">Checklist</span>
    </a>
    <a href="assessment.html" class="nav-link">
      <img src="src/assessment.png" alt="Assessment" class="nav-img">
      <span class="nav-label">Assessment</span>
    </a>
    <a href="settings.html" class="nav-link">
      <img src="src/settings.png" alt="Settings" class="nav-img">
      <span class="nav-label">Settings</span>
    </a>
  </nav>
</div>

<!-- Scripts -->
<script>
  // Dark/Light Mode
  
  // Checklist persistence + progress
  document.addEventListener('DOMContentLoaded', function () {
    const checkboxes = document.querySelectorAll('.custom-checkbox');
    const progressCount = document.getElementById('checklist-progress');
    const progressBar = document.getElementById('checklist-progress-bar');
    const resetBtn = document.getElementById('reset-btn');

    // Load saved state
    let checklist = JSON.parse(localStorage.getItem('checklist')) || { items: [] };

    // Apply saved states to checkboxes
    checkboxes.forEach(cb => {
      const saved = checklist.items.find(i => i.id === cb.id);
      if (saved) cb.checked = !!saved.completed;

      cb.addEventListener('change', () => {
        const existing = checklist.items.find(i => i.id === cb.id);
        if (existing) {
          existing.completed = cb.checked;
        } else {
          checklist.items.push({ id: cb.id, completed: cb.checked });
        }
        localStorage.setItem('checklist', JSON.stringify(checklist));
        renderProgress();
      });
    });

    // Reset button
    resetBtn.addEventListener('click', () => {
      checkboxes.forEach(cb => cb.checked = false);
      checklist = { items: [] };
      localStorage.setItem('checklist', JSON.stringify(checklist));
      renderProgress();
    });

    function renderProgress() {
      const completed = checklist.items.filter(i => i.completed).length;
      const total = checkboxes.length;
      progressCount.textContent = `${completed}/${total}`;
      const percent = Math.round((completed / total) * 100);
      progressBar.style.width = percent + '%';
    }

    renderProgress();
  });

  // Custom checkbox styling
  (function addCustomCheckboxCSS(){
    const style = document.createElement('style');
    style.innerHTML = `
      .custom-checkbox {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        width: 24px;
        height: 24px;
        border: 2px solid #3b82f6; /* Tailwind blue-600 */
        border-radius: 4px;
        outline: none;
        cursor: pointer;
        position: relative;
        background: transparent;
      }
      .custom-checkbox:checked {
        background-color: #3b82f6;
      }
      .custom-checkbox:checked::after {
        content: '\\2713';
        font-size: 16px;
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    `;
    document.head.appendChild(style);
  })();

  document.addEventListener('DOMContentLoaded', function () {
    // Palette/theme sync with settings
    const palette = localStorage.getItem('palette') || 'light';
    document.documentElement.classList.remove(
      'palette-light','palette-dark','palette-emerald','palette-sunset','palette-royal','palette-slate','palette-rose','palette-amber','palette-teal','palette-crimson','palette-indigo'
    );
    document.documentElement.classList.add('palette-' + palette);

    // Greeting logic
    function showGreeting() {
        let name = 'Guest';
        let image = null;
        const userData = localStorage.getItem('userData');
        if (userData) {
            try {
                const parsed = JSON.parse(userData);
                if (parsed.name) name = parsed.name;
                if (parsed.image) image = parsed.image;
            } catch (e) {}
        }
        const initial = name && name.length > 0 ? name.trim()[0].toUpperCase() : 'G';
        const avatarHtml = image
            ? `<img src="${image}" alt="Learner Photo" class="greeting-avatar">`
            : `<div class="greeting-avatar">${initial}</div>`;
        document.getElementById('greeting').innerHTML = `
            <div class="greeting-card">
                ${avatarHtml}
                <div class="greeting-texts">
                    <div class="greeting-title">Hello, ${name}!</div>
                    <div class="greeting-sub">Let's check if you followed the OHS Procedures</div>
                </div>
            </div>
        `;
    }
    showGreeting();
  });
</script>
</body>
</html>
