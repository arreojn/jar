<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OHS Computer System Servicing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles for transitions and animations */
        .slide-enter {
            transform: translateX(100%);
            opacity: 0;
        }
        .slide-enter-active {
            transform: translateX(0);
            opacity: 1;
            transition: all 300ms ease-out;
        }
        .slide-exit {
            transform: translateX(0);
            opacity: 1;
        }
        .slide-exit-active {
            transform: translateX(-100%);
            opacity: 0;
            transition: all 300ms ease-in;
        }
        
        /* Custom checkbox style */
        .custom-checkbox {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border: 2px solid #3b82f6;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            position: relative;
        }
        .custom-checkbox:checked {
            background-color: #3b82f6;
        }
        .custom-checkbox:checked::after {
            content: '\2713';
            font-size: 16px;
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* Progress bar animation */
        @keyframes progress {
            0% { width: 0; }
            100% { width: var(--progress); }
        }
        .progress-bar {
            animation: progress 1s ease-out forwards;
        }
    </style>
</head>
<body class="h-full bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div id="app" class="min-h-full flex flex-col">
        <!-- Header -->
        <header class="bg-blue-600 text-white shadow-md dark:bg-gray-800">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <h1 class="text-xl font-bold">OHS CSS App</h1>
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-blue-700 dark:hover:bg-gray-700">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button id="profile-btn" class="p-2 rounded-full hover:bg-blue-700 dark:hover:bg-gray-700">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="flex-grow container mx-auto px-4 py-6">
            <!-- Home Screen (default view) -->
            <div id="home-screen" class="slide-enter-active">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">Occupational Health & Safety</h2>
                    <p class="text-gray-600 dark:text-gray-300">
                        Learn essential safety procedures for Computer System Servicing to protect yourself and others in the workplace.
                    </p>
                </div>

                <!-- Quick Stats -->
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900 mr-3">
                                <i class="fas fa-book text-blue-600 dark:text-blue-300"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Lessons</p>
                                <p class="font-bold text-gray-800 dark:text-white" id="completed-lessons">0/12</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 dark:bg-green-900 mr-3">
                                <i class="fas fa-check-circle text-green-600 dark:text-green-300"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Checklist</p>
                                <p class="font-bold text-gray-800 dark:text-white" id="completed-checklist">0/24</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="mb-8">
                    <div class="flex justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Your Progress</span>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300" id="progress-percent">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                        <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full progress-bar" style="--progress: 0%"></div>
                    </div>
                </div>

                <!-- Feature Cards -->
                <div class="grid gap-6">
                    <button id="lessons-btn" class="feature-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-left hover:shadow-lg transition-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900 mr-4">
                                <i class="fas fa-book-open text-blue-600 dark:text-blue-300 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Educational Content</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Learn OHS procedures for CSS</p>
                            </div>
                        </div>
                    </button>

                    <button id="checklist-btn" class="feature-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-left hover:shadow-lg transition-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100 dark:bg-green-900 mr-4">
                                <i class="fas fa-clipboard-list text-green-600 dark:text-green-300 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Safety Checklist</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Track your safety procedures</p>
                            </div>
                        </div>
                    </button>

                    <button id="quiz-btn" class="feature-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-left hover:shadow-lg transition-shadow">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-purple-100 dark:bg-purple-900 mr-4">
                                <i class="fas fa-question-circle text-purple-600 dark:text-purple-300 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Assessment</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Test your knowledge</p>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Profile Screen (hidden by default) -->
            <div id="profile-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Profile</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
                    <div class="flex flex-col items-center mb-6">
                        <div class="w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-4">
                            <i class="fas fa-user text-blue-600 dark:text-blue-300 text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white" id="profile-name">Guest User</h3>
                        <p class="text-gray-600 dark:text-gray-300" id="profile-email">guest@example.com</p>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Full Name</label>
                            <input type="text" id="name-input" class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                            <input type="email" id="email-input" class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Occupation</label>
                            <select id="occupation-input" class="w-full px-4 py-2 border rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                                <option value="student">Student</option>
                                <option value="technician">Computer Technician</option>
                                <option value="teacher">Teacher/Instructor</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-6 flex justify-between">
                        <button id="save-profile" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            Save Changes
                        </button>
                        <button id="logout-btn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600">
                            Logout
                        </button>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">App Settings</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-700 dark:text-gray-300">Dark Mode</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="dark-mode-toggle" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-700 dark:text-gray-300">Notifications</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="notifications-toggle" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lessons Screen (hidden by default) -->
            <div id="lessons-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="lessons-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Educational Content</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="space-y-4">
                    <div class="lesson-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6" data-lesson="1">
                        <div class="flex items-start">
                            <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900 mr-4">
                                <i class="fas fa-laptop-medical text-blue-600 dark:text-blue-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Introduction to OHS in CSS</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Basic concepts and importance of occupational health and safety in computer system servicing.</p>
                                <div class="mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-book-open mr-1"></i>
                                    <span>5 min read</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="lesson-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6" data-lesson="2">
                        <div class="flex items-start">
                            <div class="p-3 rounded-full bg-green-100 dark:bg-green-900 mr-4">
                                <i class="fas fa-bolt text-green-600 dark:text-green-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Electrical Safety</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Proper handling of electrical components and prevention of electrical hazards.</p>
                                <div class="mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-book-open mr-1"></i>
                                    <span>8 min read</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="lesson-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6" data-lesson="3">
                        <div class="flex items-start">
                            <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900 mr-4">
                                <i class="fas fa-fire-extinguisher text-yellow-600 dark:text-yellow-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Fire Safety</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Prevention and response to fire hazards in computer servicing environments.</p>
                                <div class="mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-book-open mr-1"></i>
                                    <span>6 min read</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="lesson-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6" data-lesson="4">
                        <div class="flex items-start">
                            <div class="p-3 rounded-full bg-red-100 dark:bg-red-900 mr-4">
                                <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-300"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 dark:text-white">Hazard Identification</h3>
                                <p class="text-gray-600 dark:text-gray-300 mt-1">Recognizing potential hazards in computer system servicing.</p>
                                <div class="mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-book-open mr-1"></i>
                                    <span>7 min read</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lesson Detail Screen (hidden by default) -->
            <div id="lesson-detail-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="lesson-detail-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white" id="lesson-detail-title">Lesson Title</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
                    <div id="lesson-detail-content" class="prose dark:prose-invert max-w-none">
                        <!-- Content will be loaded here -->
                    </div>
                </div>

                <button id="mark-complete-btn" class="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    Mark as Complete
                </button>
            </div>

<!-- Checklist Screen (hidden by default) -->
<div id="checklist-screen" class="hidden slide-enter">
    <div class="mb-6 flex justify-between items-center">
        <button id="checklist-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
            <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
        </button>
        <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Safety Checklist</h2>
        <div class="w-8"></div> <!-- Spacer for alignment -->
    </div>

    <!-- Progress Bar -->
    <div class="mb-4">
        <div class="flex justify-between mb-2">
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Checklist Progress</span>
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300" id="checklist-progress">0/24</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
            <div id="checklist-progress-bar" class="bg-green-600 h-2.5 rounded-full progress-bar" style="--progress: 0%"></div>
        </div>
    </div>

    <div class="space-y-4">
        <!-- General Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">General Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-1" class="custom-checkbox mr-3" data-category="general">
                    <label for="check-1" class="text-gray-700 dark:text-gray-300">Wear appropriate personal protective equipment (PPE)</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-2" class="custom-checkbox mr-3" data-category="general">
                    <label for="check-2" class="text-gray-700 dark:text-gray-300">Keep work area clean, dry, and organized</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-3" class="custom-checkbox mr-3" data-category="general">
                    <label for="check-3" class="text-gray-700 dark:text-gray-300">Use correct lifting techniques when handling heavy equipment</label>
                </div>
            </div>
        </div>

        <!-- Electrical Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Electrical Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-4" class="custom-checkbox mr-3" data-category="electrical">
                    <label for="check-4" class="text-gray-700 dark:text-gray-300">Disconnect power before working on equipment</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-5" class="custom-checkbox mr-3" data-category="electrical">
                    <label for="check-5" class="text-gray-700 dark:text-gray-300">Use anti-static wrist strap or mat when handling components</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-6" class="custom-checkbox mr-3" data-category="electrical">
                    <label for="check-6" class="text-gray-700 dark:text-gray-300">Inspect cables and plugs for damage before use</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-7" class="custom-checkbox mr-3" data-category="electrical">
                    <label for="check-7" class="text-gray-700 dark:text-gray-300">Avoid overloading outlets and extension cords</label>
                </div>
            </div>
        </div>

        <!-- Tool Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Tool Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-8" class="custom-checkbox mr-3" data-category="tools">
                    <label for="check-8" class="text-gray-700 dark:text-gray-300">Use tools only for their intended purpose</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-9" class="custom-checkbox mr-3" data-category="tools">
                    <label for="check-9" class="text-gray-700 dark:text-gray-300">Keep cutting tools sharp and in good condition</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-10" class="custom-checkbox mr-3" data-category="tools">
                    <label for="check-10" class="text-gray-700 dark:text-gray-300">Store tools safely when not in use</label>
                </div>
            </div>
        </div>

        <!-- Fire Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Fire Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-11" class="custom-checkbox mr-3" data-category="fire">
                    <label for="check-11" class="text-gray-700 dark:text-gray-300">Keep flammable materials away from heat sources</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-12" class="custom-checkbox mr-3" data-category="fire">
                    <label for="check-12" class="text-gray-700 dark:text-gray-300">Ensure fire extinguishers are accessible and inspected</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-13" class="custom-checkbox mr-3" data-category="fire">
                    <label for="check-13" class="text-gray-700 dark:text-gray-300">Never use water on electrical fires</label>
                </div>
            </div>
        </div>

        <!-- Ergonomic Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Ergonomic Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-14" class="custom-checkbox mr-3" data-category="ergonomic">
                    <label for="check-14" class="text-gray-700 dark:text-gray-300">Adjust workstation to maintain proper posture</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-15" class="custom-checkbox mr-3" data-category="ergonomic">
                    <label for="check-15" class="text-gray-700 dark:text-gray-300">Take regular breaks to prevent eye strain and fatigue</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-16" class="custom-checkbox mr-3" data-category="ergonomic">
                    <label for="check-16" class="text-gray-700 dark:text-gray-300">Use proper seating and monitor positioning</label>
                </div>
            </div>
        </div>

        <!-- Chemical Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Chemical Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-17" class="custom-checkbox mr-3" data-category="chemical">
                    <label for="check-17" class="text-gray-700 dark:text-gray-300">Store solvents and chemicals in labeled containers</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-18" class="custom-checkbox mr-3" data-category="chemical">
                    <label for="check-18" class="text-gray-700 dark:text-gray-300">Wear gloves and masks when handling hazardous substances</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-19" class="custom-checkbox mr-3" data-category="chemical">
                    <label for="check-19" class="text-gray-700 dark:text-gray-300">Dispose of chemical waste properly</label>
                </div>
            </div>
        </div>

        <!-- Psychological Safety -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Psychological Safety</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-20" class="custom-checkbox mr-3" data-category="psychological">
                    <label for="check-20" class="text-gray-700 dark:text-gray-300">Manage workload to reduce stress and fatigue</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-21" class="custom-checkbox mr-3" data-category="psychological">
                    <label for="check-21" class="text-gray-700 dark:text-gray-300">Take scheduled breaks to maintain focus</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-22" class="custom-checkbox mr-3" data-category="psychological">
                    <label for="check-22" class="text-gray-700 dark:text-gray-300">Seek support when dealing with challenging tasks</label>
                </div>
            </div>
        </div>

        <!-- Emergency Preparedness -->
        <div class="checklist-category bg-white dark:bg-gray-800 rounded-lg shadow-md p-4">
            <h3 class="font-bold text-lg text-gray-800 dark:text-white mb-3">Emergency Preparedness</h3>
            <div class="space-y-3">
                <div class="flex items-center">
                    <input type="checkbox" id="check-23" class="custom-checkbox mr-3" data-category="emergency">
                    <label for="check-23" class="text-gray-700 dark:text-gray-300">Know the location of fire exits and assembly points</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="check-24" class="custom-checkbox mr-3" data-category="emergency">
                    <label for="check-24" class="text-gray-700 dark:text-gray-300">Be trained in basic first aid and fire extinguisher use</label>
                </div>
            </div>
        </div>
    </div>
</div>
           



            <!-- Quiz Screen (hidden by default) -->
            <div id="quiz-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="quiz-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Assessment</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
                    <div id="quiz-content">
                        <div class="text-center py-8">
                            <i class="fas fa-question-circle text-5xl text-purple-500 mb-4"></i>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Test Your Knowledge</h3>
                            <p class="text-gray-600 dark:text-gray-300 mb-6">Take this quiz to assess your understanding of occupational health and safety in computer system servicing.</p>
                            <button id="start-quiz-btn" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500">
                                Start Quiz
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Questions Screen (hidden by default) -->
            <div id="quiz-questions-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="quiz-questions-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Question <span id="question-number">1</span>/5</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
                    <div id="quiz-question-container">
                        <p class="text-lg font-medium text-gray-800 dark:text-white mb-6" id="quiz-question">Loading question...</p>
                        
                        <div id="quiz-options" class="space-y-3">
                            <!-- Options will be loaded here -->
                        </div>
                    </div>
                </div>

                <button id="next-question-btn" class="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 hidden">
                    Next Question
                </button>
                <button id="submit-quiz-btn" class="w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 hidden">
                    Submit Quiz
                </button>
            </div>

            <!-- Quiz Results Screen (hidden by default) -->
            <div id="quiz-results-screen" class="hidden slide-enter">
                <div class="mb-6 flex justify-between items-center">
                    <button id="quiz-results-back-btn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-arrow-left text-gray-700 dark:text-white"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Quiz Results</h2>
                    <div class="w-8"></div> <!-- Spacer for alignment -->
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 text-center">
                    <div class="w-32 h-32 mx-auto rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center mb-6">
                        <span class="text-4xl font-bold text-green-600 dark:text-green-300" id="quiz-score">80%</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2" id="quiz-result-title">Good Job!</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6" id="quiz-result-description">You have a good understanding of occupational health and safety procedures.</p>
                    
                    <div class="mb-6">
                        <div class="flex justify-between mb-2">
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Correct Answers</span>
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300" id="correct-answers">4/5</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                            <div id="quiz-progress-bar" class="bg-green-600 h-2.5 rounded-full progress-bar" style="--progress: 80%"></div>
                        </div>
                    </div>

                    <button id="review-quiz-btn" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 mr-3">
                        Review Answers
                    </button>
                    <button id="retake-quiz-btn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600">
                        Retake Quiz
                    </button>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
            <div class="container mx-auto px-4">
                <div class="flex justify-around">
                    <button id="nav-home" class="py-3 px-4 text-blue-600 dark:text-blue-400">
                        <i class="fas fa-home text-xl block mx-auto mb-1"></i>
                        <span class="text-xs">Home</span>
                    </button>
                    <button id="nav-lessons" class="py-3 px-4 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-book text-xl block mx-auto mb-1"></i>
                        <span class="text-xs">Lessons</span>
                    </button>
                    <button id="nav-checklist" class="py-3 px-4 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-clipboard-list text-xl block mx-auto mb-1"></i>
                        <span class="text-xs">Checklist</span>
                    </button>
                    <button id="nav-quiz" class="py-3 px-4 text-gray-500 dark:text-gray-400">
                        <i class="fas fa-question-circle text-xl block mx-auto mb-1"></i>
                        <span class="text-xs">Quiz</span>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <script>
        // Database simulation using localStorage
        const db = {
            get: (key) => JSON.parse(localStorage.getItem(key)),
            set: (key, value) => localStorage.setItem(key, JSON.stringify(value)),
            remove: (key) => localStorage.removeItem(key),
            clear: () => localStorage.clear()
        };

        // Initialize app data if not exists
        if (!db.get('user')) {
            db.set('user', {
                name: 'Guest User',
                email: 'guest@example.com',
                occupation: 'student',
                darkMode: false,
                notifications: true
            });
        }

        if (!db.get('lessons')) {
            db.set('lessons', {
                completed: [],
                progress: 0
            });
        }

        if (!db.get('checklist')) {
            db.set('checklist', {
                items: [
                    { id: 'check-1', completed: false },
                    { id: 'check-2', completed: false },
                    { id: 'check-3', completed: false },
                    { id: 'check-4', completed: false },
                    { id: 'check-5', completed: false },
                    { id: 'check-6', completed: false },
                    { id: 'check-7', completed: false },
                    { id: 'check-8', completed: false },
                    { id: 'check-9', completed: false },
                    { id: 'check-10', completed: false }
                ],
                progress: 0
            });
        }

        if (!db.get('quiz')) {
            db.set('quiz', {
                lastScore: null,
                lastAttempt: null
            });
        }

        // Lesson content
        const lessonsContent = {
            1: {
                title: "Introduction to OHS in CSS",
                content: `
                   <h3 class="text-2xl font-bold mb-4">What is Occupational Health and Safety (OHS)?</h3>
<p class="mb-4 text-gray-700 dark:text-gray-300">
    Occupational Health and Safety (OHS) refers to the set of <span class="font-semibold">laws, standards, and best practices</span> that aim to protect the physical and mental well-being of workers in their workplace. 
    In the context of <span class="font-semibold">Computer System Servicing (CSS)</span>, OHS emphasizes identifying and reducing risks associated with handling computer hardware, software, networking tools, and related electronic equipment.
</p>

<div class="bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4 mb-6 rounded">
    <p class="font-semibold text-blue-700 dark:text-blue-300">Why is OHS important in CSS?</p>
    <ul class="list-disc pl-5 mt-2 text-blue-700 dark:text-blue-300 space-y-1">
        <li>Prevents workplace injuries and illnesses</li>
        <li>Reduces risks of <span class="font-semibold">electrical shocks, burns, and fires</span></li>
        <li>Minimizes exposure to <span class="font-semibold">hazardous materials and chemicals</span></li>
        <li>Promotes proper <span class="font-semibold">ergonomic practices</span> to avoid musculoskeletal disorders</li>
        <li>Encourages a safe, efficient, and <span class="font-semibold">productivity-boosting environment</span></li>
        <li>Ensures compliance with <span class="font-semibold">legal and regulatory requirements</span></li>
        <li>Raises awareness of <span class="font-semibold">emergency procedures and first aid response</span></li>
    </ul>
</div>

<h3 class="text-2xl font-bold mb-4 mt-6">Common Hazards in Computer System Servicing</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Electrical Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Exposure to live wires, faulty components, overloaded circuits, or poor grounding can result in electric shocks, equipment damage, or fires.</p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Ergonomic Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Improper workstation setup, poor posture, and repetitive tasks may lead to back pain, carpal tunnel syndrome, eye strain, or fatigue.</p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Chemical Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Exposure to printer toners, cleaning solvents, soldering fumes, and other chemicals used in maintenance can cause skin or respiratory issues if mishandled.</p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Physical Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Sharp edges of metal casings, tripping over cables, lifting heavy equipment, or mishandling tools can result in cuts, bruises, or sprains.</p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Fire Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Overheating components, short circuits, or improper storage of flammable materials can trigger workplace fires if safety measures are ignored.</p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Psychosocial Hazards</h4>
        <p class="text-gray-600 dark:text-gray-300">Stress, long working hours, or lack of proper breaks may affect focus, leading to errors and accidents.</p>
    </div>
</div>

<h3 class="text-2xl font-bold mb-4">Basic OHS Principles for CSS</h3>
<ol class="list-decimal pl-5 space-y-2 mb-6 text-gray-700 dark:text-gray-300">
    <li>Always disconnect power before repairing or servicing equipment</li>
    <li>Use appropriate <span class="font-semibold">Personal Protective Equipment (PPE)</span> such as gloves and anti-static wrist straps</li>
    <li>Maintain a clean, dry, and organized work area free of clutter and spills</li>
    <li>Follow proper lifting techniques to avoid back injuries when moving heavy equipment</li>
    <li>Practice <span class="font-semibold">safe cable management</span> to prevent tripping hazards</li>
    <li>Know the location of emergency exits, alarms, and fire extinguishers</li>
    <li>Have easy access to <span class="font-semibold">first aid kits</span> and emergency contact numbers</li>
    <li>Report and document any hazards, accidents, or near-misses immediately</li>
    <li>Attend regular <span class="font-semibold">OHS training and drills</span> to stay updated on safety protocols</li>
    <li>Always follow manufacturer’s guidelines and industry best practices when servicing equipment</li>
</ol>

<div class="bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-500 p-4 rounded">
    <p class="font-semibold text-yellow-800 dark:text-yellow-300">Remember:</p>
    <p class="text-yellow-700 dark:text-yellow-400">A safe technician is an effective technician. By following OHS principles, you not only protect yourself but also ensure the reliability and longevity of the systems you maintain.</p>
</div>

                `
            },
            2: {
                title: "Electrical Safety",
                content: `
                    <h3 class="text-2xl font-bold mb-4">Understanding Electrical Hazards in CSS</h3>
<p class="mb-4 text-gray-700 dark:text-gray-300">
    Computer System Servicing (CSS) often involves handling electrical and electronic components. 
    Without proper precautions, workers are exposed to risks such as <span class="font-semibold">electric shocks, burns, equipment damage, fires, or even fatalities</span>. 
    Electrical safety is not just a precaution—it is a vital discipline that protects both technicians and the systems they maintain.
</p>

<div class="bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 p-4 mb-6 rounded">
    <p class="font-semibold text-red-700 dark:text-red-300">Dangerous Practices to Avoid:</p>
    <ul class="list-disc pl-5 mt-2 text-red-700 dark:text-red-300 space-y-1">
        <li>Working on live circuits unless absolutely necessary and authorized</li>
        <li>Using damaged, frayed, or makeshift power cords</li>
        <li>Overloading outlets, extension cords, or power strips</li>
        <li>Using metal tools or jewelry near exposed circuits</li>
        <li>Working with wet hands, damp clothing, or in humid environments</li>
        <li>Bypassing safety features such as fuses or circuit breakers</li>
    </ul>
</div>

<h3 class="text-2xl font-bold mb-4">Essential Electrical Safety Measures</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">1. Power Disconnection</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Always unplug and isolate equipment before servicing. Disconnect from the wall outlet 
            rather than just switching off the power supply.
        </p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">2. Use of PPE</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Wear insulated gloves and shoes, and use insulated tools. Anti-static wrist straps should 
            be properly grounded to prevent damage to components.
        </p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">3. Proper Grounding</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Ensure all equipment is properly grounded. Use three-pronged plugs and test outlets 
            for proper wiring before use.
        </p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">4. Static Electricity Control</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Use anti-static mats, wrist straps, and ESD-safe tools to prevent electrostatic discharge 
            (ESD) which can destroy sensitive electronic components.
        </p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">5. Circuit Awareness</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Label circuits clearly, and always verify with a multimeter before touching any component 
            assumed to be “off.”
        </p>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">6. Safe Workspace</h4>
        <p class="text-gray-600 dark:text-gray-300">
            Keep the work area clean, dry, and free from conductive clutter. Avoid running power cords 
            under carpets or across walkways.
        </p>
    </div>
</div>

<h3 class="text-2xl font-bold mb-4">Working with Capacitors</h3>
<p class="mb-4 text-gray-700 dark:text-gray-300">
    Capacitors—especially in power supplies and monitors—can store a <span class="font-semibold">dangerous charge 
    long after the device is unplugged</span>. Mishandling them can lead to severe electric shocks. 
    Always follow these safety steps:
</p>
<ol class="list-decimal pl-5 space-y-2 mb-6 text-gray-700 dark:text-gray-300">
    <li>Unplug the power supply and allow at least <span class="font-semibold">15–30 minutes</span> for natural discharge.</li>
    <li>Use a properly rated resistor (10–20k ohm, 5W) to safely discharge capacitors.</li>
    <li>Never short capacitors with screwdrivers or pliers—this can cause sparks, explosions, or permanent damage.</li>
    <li>After discharging, confirm with a multimeter that the voltage is at zero.</li>
    <li>If unsure, treat all capacitors as if they are still charged.</li>
</ol>

<div class="bg-green-50 dark:bg-green-900/30 border-l-4 border-green-500 p-4 rounded">
    <p class="font-semibold text-green-700 dark:text-green-300">Best Practices for Electrical Safety:</p>
    <ul class="list-disc pl-5 mt-2 text-green-700 dark:text-green-300 space-y-1">
        <li>Inspect cords, plugs, and outlets regularly for wear or damage</li>
        <li>Use surge protectors or UPS for sensitive computer equipment</li>
        <li>Clearly label high-voltage areas and restrict access to authorized personnel only</li>
        <li>Keep liquids, sprays, and conductive objects away from equipment</li>
        <li>Know the location of circuit breakers and how to safely reset them</li>
        <li>Have a <span class="font-semibold">Class C fire extinguisher</span> available in electrical work areas</li>
        <li>Always work with a buddy or inform someone when performing high-risk electrical servicing</li>
    </ul>
</div>

            
                `
},
            3: {
                title: "Fire Safety",
                content: `
                  <h3 class="text-xl font-bold mb-4">Fire Hazards in Computer System Servicing</h3>
<p class="mb-4">
    Computer equipment and work environments present several potential fire hazards that technicians must be aware of. 
    Fires in IT or electronics workplaces not only threaten human lives but can also damage expensive equipment, 
    destroy important data, and interrupt business operations. Understanding these risks is the first step 
    in preventing fires and knowing how to respond if one occurs.
</p>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Common Fire Causes</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Overloaded or improperly connected electrical circuits</li>
            <li>Faulty, frayed, or damaged wiring</li>
            <li>Overheating components such as CPUs, power supplies, or batteries</li>
            <li>Improperly stored or spilled flammable materials (cleaning solvents, aerosols)</li>
            <li>Battery malfunctions (especially lithium-ion batteries in laptops and UPS units)</li>
            <li>Dust buildup inside equipment that ignites when overheated</li>
            <li>Blocked ventilation preventing heat dissipation</li>
        </ul>
    </div>
    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Fire Prevention Measures</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Schedule regular equipment maintenance and cleaning</li>
            <li>Ensure proper ventilation and cooling systems for computers and servers</li>
            <li>Store flammable liquids and chemicals in labeled, fire-resistant containers</li>
            <li>Avoid overloading power strips and extension cords</li>
            <li>Use surge protectors and Uninterruptible Power Supplies (UPS) correctly</li>
            <li>Keep cables organized to prevent overheating and tripping hazards</li>
            <li>Maintain a clean and clutter-free workspace at all times</li>
        </ul>
    </div>
</div>

<h3 class="text-xl font-bold mb-4">Types of Fire Extinguishers</h3>
<p class="mb-4">
    Different types of fires require different extinguishing methods. 
    Using the wrong type can worsen the fire or put the responder in danger. 
    Below are the most common fire classes and the appropriate extinguishers:
</p>

<div class="overflow-x-auto mb-6">
    <table class="min-w-full bg-white dark:bg-gray-700 rounded-lg overflow-hidden">
        <thead class="bg-gray-100 dark:bg-gray-600">
            <tr>
                <th class="px-4 py-2 text-left text-gray-700 dark:text-white">Fire Class</th>
                <th class="px-4 py-2 text-left text-gray-700 dark:text-white">Description</th>
                <th class="px-4 py-2 text-left text-gray-700 dark:text-white">Extinguisher Type</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 dark:divide-gray-600">
            <tr>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Class A</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Ordinary combustibles (wood, paper, cloth, plastics)</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Water, foam, dry chemical</td>
            </tr>
            <tr>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Class B</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Flammable liquids (gasoline, oil, solvents, grease)</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">CO₂, dry chemical, foam</td>
            </tr>
            <tr>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Class C</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Electrical equipment (computers, servers, appliances)</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">CO₂, dry chemical (non-conductive)</td>
            </tr>
            <tr>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Class D</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Combustible metals (magnesium, lithium, sodium)</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Special dry powder extinguishers</td>
            </tr>
            <tr>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Class K</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Cooking oils and fats (common in cafeterias or staff kitchens)</td>
                <td class="px-4 py-2 text-gray-700 dark:text-gray-300">Wet chemical extinguishers</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-500 p-4 mb-6">
    <p class="font-medium text-yellow-700 dark:text-yellow-300">Important Note:</p>
    <p class="text-yellow-700 dark:text-yellow-300 mt-2">
        Never use water or foam extinguishers on electrical fires (Class C). 
        Water conducts electricity and can cause electrocution or spread the fire. 
        Always use a CO₂ or non-conductive dry chemical extinguisher for electrical equipment.
    </p>
</div>

<h3 class="text-xl font-bold mb-4">Emergency Response Plan</h3>
<p class="mb-4">
    Every workplace should have a clear and well-communicated emergency response plan for fires. 
    As a computer technician, you are expected to be familiar with the procedures and act responsibly during emergencies:
</p>
<ol class="list-decimal pl-5 space-y-2 mb-6">
    <li>Know the location of all fire exits, alarms, and extinguishers in your area.</li>
    <li>Familiarize yourself with evacuation routes and designated assembly points.</li>
    <li>Be trained in the proper use of fire extinguishers (PASS method: Pull, Aim, Squeeze, Sweep).</li>
    <li>Know how to shut off main power sources in case of an electrical fire.</li>
    <li>Never attempt to fight a large or spreading fire — evacuate immediately and call emergency services.</li>
    <li>Assist coworkers or clients in evacuating, especially those with mobility issues.</li>
</ol>

<div class="bg-blue-50 dark:bg-blue-900/30 border-l-4 border-blue-500 p-4">
    <p class="font-medium text-blue-700 dark:text-blue-300">Fire Safety Checklist for Computer Technicians:</p>
    <ul class="list-disc pl-5 mt-2 text-blue-700 dark:text-blue-300">
        <li>Keep work areas free of paper, boxes, and other combustibles.</li>
        <li>Ensure proper ventilation for computer equipment and server racks.</li>
        <li>Regularly inspect cables, plugs, and power strips for damage or overheating.</li>
        <li>Never block access to fire exits, alarms, or firefighting equipment.</li>
        <li>Report any fire hazards or unusual smells (like burning plastic) immediately.</li>
        <li>Participate in fire drills and take them seriously.</li>
    </ul>
</div>

                `
            },
            4: {
                title: "Hazard Identification",
                content: `
                  <h3 class="text-xl font-bold mb-4">Understanding Hazards in CSS</h3>
<p class="mb-4">
    Hazard identification is the process of recognizing potential sources of harm in the workplace. 
    In computer system servicing, hazards can be physical, chemical, biological, ergonomic, 
    electrical, or psychological in nature. Recognizing hazards is the first step to ensuring 
    workplace safety and preventing accidents.
</p>

<div class="bg-purple-50 dark:bg-purple-900/30 border-l-4 border-purple-500 p-4 mb-6">
    <p class="font-medium text-purple-700 dark:text-purple-300">Key Terms:</p>
    <ul class="list-disc pl-5 mt-2 text-purple-700 dark:text-purple-300">
        <li><strong>Hazard:</strong> Any source of potential damage, harm, or adverse health effects</li>
        <li><strong>Risk:</strong> The chance or probability that a person will be harmed if exposed to a hazard</li>
        <li><strong>Control Measure:</strong> Steps taken to eliminate or reduce risk</li>
        <li><strong>Incident:</strong> An event that may or may not result in injury, but reveals a safety weakness</li>
    </ul>
</div>

<h3 class="text-xl font-bold mb-4">Common Hazards in CSS</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Physical Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Cuts from sharp edges inside computer cases</li>
            <li>Trips from loose cables on the floor</li>
            <li>Eye injuries from flying debris when drilling</li>
            <li>Back injuries from lifting heavy equipment</li>
        </ul>
    </div>

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Chemical Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Exposure to cleaning solvents</li>
            <li>Printer toner particles</li>
            <li>Battery acid from UPS systems</li>
            <li>Solder fumes</li>
        </ul>
    </div>

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Biological Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Dust mites in old equipment</li>
            <li>Mold in damp environments</li>
            <li>Bacteria on shared equipment</li>
        </ul>
    </div>

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Ergonomic Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Poor workstation setup</li>
            <li>Repetitive strain from keyboard/mouse use</li>
            <li>Awkward postures when servicing equipment</li>
            <li>Eye strain from prolonged screen time</li>
        </ul>
    </div>

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Electrical Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Electric shock from exposed wires</li>
            <li>Overloaded power outlets and extension cords</li>
            <li>Improper grounding of equipment</li>
            <li>Short circuits and fire risks</li>
        </ul>
    </div>

    <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
        <h4 class="font-bold text-gray-800 dark:text-white mb-2">Psychological Hazards</h4>
        <ul class="list-disc pl-5 text-gray-600 dark:text-gray-300">
            <li>Stress due to high workload or deadlines</li>
            <li>Mental fatigue from prolonged troubleshooting</li>
            <li>Frustration from repetitive technical issues</li>
            <li>Burnout from poor work-life balance</li>
        </ul>
    </div>

</div>

<h3 class="text-xl font-bold mb-4">Hazard Identification Process</h3>
<p class="mb-4">Systematic hazard identification involves these steps:</p>
<ol class="list-decimal pl-5 space-y-2 mb-6">
    <li><strong>Workplace Inspection:</strong> Regularly examine the work area for potential hazards</li>
    <li><strong>Task Analysis:</strong> Break down work activities to identify hazards at each step</li>
    <li><strong>Equipment Review:</strong> Check all tools and equipment for potential hazards</li>
    <li><strong>Incident Investigation:</strong> Analyze accidents or near-misses to identify hazards</li>
    <li><strong>Worker Consultation:</strong> Talk to colleagues about hazards they've noticed</li>
</ol>

<div class="bg-green-50 dark:bg-green-900/30 border-l-4 border-green-500 p-4 mb-6">
    <p class="font-medium text-green-700 dark:text-green-300">Hazard Identification Tools:</p>
    <ul class="list-disc pl-5 mt-2 text-green-700 dark:text-green-300">
        <li><strong>Checklists:</strong> Standardized lists of potential hazards</li>
        <li><strong>Job Safety Analysis (JSA):</strong> Breaking down jobs into steps and identifying hazards</li>
        <li><strong>SWIFT Analysis:</strong> Structured What-If Technique for identifying hazards</li>
        <li><strong>Hazard Reporting System:</strong> Formal process for workers to report hazards</li>
    </ul>
</div>

<h3 class="text-xl font-bold mb-4">Hierarchy of Controls</h3>
<p class="mb-4">Once hazards are identified, use this hierarchy to control risks:</p>
<div class="bg-white dark:bg-gray-700 rounded-lg shadow overflow-hidden mb-6">
    <div class="p-4 border-b border-gray-200 dark:border-gray-600">
        <h4 class="font-bold text-gray-800 dark:text-white">1. Elimination</h4>
        <p class="text-gray-600 dark:text-gray-300">Remove the hazard completely from the workplace</p>
    </div>
    <div class="p-4 border-b border-gray-200 dark:border-gray-600">
        <h4 class="font-bold text-gray-800 dark:text-white">2. Substitution</h4>
        <p class="text-gray-600 dark:text-gray-300">Replace with a less hazardous alternative</p>
    </div>
    <div class="p-4 border-b border-gray-200 dark:border-gray-600">
        <h4 class="font-bold text-gray-800 dark:text-white">3. Engineering Controls</h4>
        <p class="text-gray-600 dark:text-gray-300">Isolate people from the hazard (e.g., machine guards, circuit breakers)</p>
    </div>
    <div class="p-4 border-b border-gray-200 dark:border-gray-600">
        <h4 class="font-bold text-gray-800 dark:text-white">4. Administrative Controls</h4>
        <p class="text-gray-600 dark:text-gray-300">Change work procedures or policies (e.g., job rotation, safety training)</p>
    </div>
    <div class="p-4">
        <h4 class="font-bold text-gray-800 dark:text-white">5. PPE</h4>
        <p class="text-gray-600 dark:text-gray-300">Personal protective equipment as a last line of defense (gloves, goggles, anti-static wrist straps)</p>
    </div>
</div>

<h3 class="text-xl font-bold mb-4">Preventive Measures</h3>
<ul class="list-disc pl-5 mb-6 text-gray-600 dark:text-gray-300">
    <li>Always power off and unplug devices before servicing</li>
    <li>Use proper lifting techniques to avoid back injuries</li>
    <li>Ensure proper ventilation when soldering or using chemicals</li>
    <li>Label and organize cables to prevent tripping hazards</li>
    <li>Take regular breaks to reduce eye strain and fatigue</li>
    <li>Use ESD (Electrostatic Discharge) protection when handling components</li>
</ul>

<div class="bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-500 p-4 mb-6">
    <p class="font-medium text-yellow-700 dark:text-yellow-300">Quick Safety Tips:</p>
    <ul class="list-disc pl-5 mt-2 text-yellow-700 dark:text-yellow-300">
        <li>"If in doubt, ask" — never assume a procedure is safe</li>
        <li>Keep a fire extinguisher and first aid kit accessible</li>
        <li>Report hazards immediately to supervisors</li>
        <li>Stay updated with safety training and drills</li>
    </ul>
</div>

<h3 class="text-xl font-bold mb-4">Case Scenario</h3>
<p class="mb-4">
    <strong>Example:</strong> A technician lifted a heavy CPU tower without assistance, resulting in a back injury. 
    This could have been prevented through proper ergonomic training and the use of lifting aids.
</p>

                `
            }
        };

        // Quiz questions
        const quizQuestions = [
            {
                question: "What is the first thing you should do before working on computer hardware?",
                options: [
                    "Wash your hands",
                    "Disconnect power",
                    "Gather your tools",
                    "Remove jewelry"
                ],
                correctAnswer: 1,
                explanation: "Always disconnect power before working on computer hardware to prevent electrical shock."
            },
            {
                question: "Which type of fire extinguisher is appropriate for electrical fires?",
                options: [
                    "Water",
                    "Foam",
                    "CO2",
                    "Wet chemical"
                ],
                correctAnswer: 2,
                explanation: "CO2 extinguishers are suitable for electrical fires as they don't conduct electricity."
            },
            {
                question: "What is the purpose of an anti-static wrist strap?",
                options: [
                    "To prevent electric shock",
                    "To ground the technician and prevent ESD",
                    "To keep hands warm",
                    "To identify the technician"
                ],
                correctAnswer: 1,
                explanation: "Anti-static wrist straps ground the technician to prevent electrostatic discharge (ESD) that can damage sensitive components."
            },
            {
                question: "Which of these is NOT a common hazard in computer system servicing?",
                options: [
                    "Electrical shock",
                    "Repetitive strain injuries",
                    "Falling from heights",
                    "Exposure to toner particles"
                ],
                correctAnswer: 2,
                explanation: "While falls can happen in any workplace, they are not among the most common hazards specifically in computer system servicing."
            },
            {
                question: "What should you do if you discover a damaged power cord on equipment?",
                options: [
                    "Continue using it carefully",
                    "Tape it up and keep using it",
                    "Tag it out of service and report it",
                    "Only use it when absolutely necessary"
                ],
                correctAnswer: 2,
                explanation: "Damaged power cords should be immediately tagged out of service and reported to prevent electrical hazards."
            }
        ];

        // App state
        const state = {
            currentScreen: 'home',
            previousScreen: '',
            currentLesson: null,
            quiz: {
                currentQuestion: 0,
                userAnswers: [],
                started: false
            }
        };

        // DOM elements
        const elements = {
            // Screens
            homeScreen: document.getElementById('home-screen'),
            profileScreen: document.getElementById('profile-screen'),
            lessonsScreen: document.getElementById('lessons-screen'),
            lessonDetailScreen: document.getElementById('lesson-detail-screen'),
            checklistScreen: document.getElementById('checklist-screen'),
            quizScreen: document.getElementById('quiz-screen'),
            quizQuestionsScreen: document.getElementById('quiz-questions-screen'),
            quizResultsScreen: document.getElementById('quiz-results-screen'),
            
            // Navigation buttons
            profileBtn: document.getElementById('profile-btn'),
            backBtn: document.getElementById('back-btn'),
            lessonsBackBtn: document.getElementById('lessons-back-btn'),
            lessonDetailBackBtn: document.getElementById('lesson-detail-back-btn'),
            checklistBackBtn: document.getElementById('checklist-back-btn'),
            quizBackBtn: document.getElementById('quiz-back-btn'),
            quizQuestionsBackBtn: document.getElementById('quiz-questions-back-btn'),
            quizResultsBackBtn: document.getElementById('quiz-results-back-btn'),
            
            // Bottom nav
            navHome: document.getElementById('nav-home'),
            navLessons: document.getElementById('nav-lessons'),
            navChecklist: document.getElementById('nav-checklist'),
            navQuiz: document.getElementById('nav-quiz'),
            
            // Feature buttons
            lessonsBtn: document.getElementById('lessons-btn'),
            checklistBtn: document.getElementById('checklist-btn'),
            quizBtn: document.getElementById('quiz-btn'),
            
            // Profile elements
            profileName: document.getElementById('profile-name'),
            profileEmail: document.getElementById('profile-email'),
            nameInput: document.getElementById('name-input'),
            emailInput: document.getElementById('email-input'),
            occupationInput: document.getElementById('occupation-input'),
            saveProfile: document.getElementById('save-profile'),
            logoutBtn: document.getElementById('logout-btn'),
            darkModeToggle: document.getElementById('dark-mode-toggle'),
            notificationsToggle: document.getElementById('notifications-toggle'),
            
            // Lesson elements
            lessonCards: document.querySelectorAll('.lesson-card'),
            lessonDetailTitle: document.getElementById('lesson-detail-title'),
            lessonDetailContent: document.getElementById('lesson-detail-content'),
            markCompleteBtn: document.getElementById('mark-complete-btn'),
            
            // Checklist elements
            checklistItems: document.querySelectorAll('.custom-checkbox'),
            checklistProgress: document.getElementById('checklist-progress'),
            checklistProgressBar: document.getElementById('checklist-progress-bar'),
            
            // Quiz elements
            startQuizBtn: document.getElementById('start-quiz-btn'),
            nextQuestionBtn: document.getElementById('next-question-btn'),
            submitQuizBtn: document.getElementById('submit-quiz-btn'),
            quizContent: document.getElementById('quiz-content'),
            quizQuestionContainer: document.getElementById('quiz-question-container'),
            quizQuestion: document.getElementById('quiz-question'),
            quizOptions: document.getElementById('quiz-options'),
            questionNumber: document.getElementById('question-number'),
            
            // Quiz results elements
            quizScore: document.getElementById('quiz-score'),
            quizResultTitle: document.getElementById('quiz-result-title'),
            quizResultDescription: document.getElementById('quiz-result-description'),
            correctAnswers: document.getElementById('correct-answers'),
            quizProgressBar: document.getElementById('quiz-progress-bar'),
            reviewQuizBtn: document.getElementById('review-quiz-btn'),
            retakeQuizBtn: document.getElementById('retake-quiz-btn'),
            
            // Progress elements
            completedLessons: document.getElementById('completed-lessons'),
            completedChecklist: document.getElementById('completed-checklist'),
            progressPercent: document.getElementById('progress-percent'),
            progressBar: document.getElementById('progress-bar'),
            
            // Theme toggle
            themeToggle: document.getElementById('theme-toggle')
        };

        // Initialize the app
        function initApp() {
            // Load user data
            loadUserData();
            
            // Load progress data
            loadProgressData();
            
            // Set up event listeners
            setupEventListeners();
            
            // Check if dark mode is enabled
            checkDarkMode();

            // Set initial screen to home
            showScreen('home');
        }

        // Load user data from local storage
        function loadUserData() {
            const user = db.get('user');
            if (user) {
                elements.profileName.textContent = user.name;
                elements.profileEmail.textContent = user.email;
                elements.nameInput.value = user.name;
                elements.emailInput.value = user.email;
                elements.occupationInput.value = user.occupation;
                elements.darkModeToggle.checked = user.darkMode;
                elements.notificationsToggle.checked = user.notifications;
            }
        }

        // Load progress data from local storage
        function loadProgressData() {
            // Lessons progress
            const lessons = db.get('lessons');
            if (lessons && lessons.completed) {
                const completedCount = lessons.completed.length;
                const totalLessons = 4; // We have 4 lessons
                elements.completedLessons.textContent = `${completedCount}/${totalLessons}`;
                
                // Update lesson cards with completion status
                document.querySelectorAll('.lesson-card').forEach(card => {
                    const lessonId = card.getAttribute('data-lesson');
                    if (lessons.completed.includes(parseInt(lessonId))) {
                        const icon = card.querySelector('.fa-book-open').parentNode;
                        icon.classList.remove('bg-blue-100', 'dark:bg-blue-900');
                        icon.classList.add('bg-green-100', 'dark:bg-green-900');
                        const existingCheckIcon = card.querySelector('.fa-check-circle');
                        if (!existingCheckIcon) {
                            const checkIcon = document.createElement('i');
                            checkIcon.className = 'fas fa-check-circle text-green-600 dark:text-green-300 ml-2';
                            card.querySelector('h3').appendChild(checkIcon);
                        }
                    } else {
                        const icon = card.querySelector('.fa-book-open').parentNode;
                        icon.classList.remove('bg-green-100', 'dark:bg-green-900');
                        icon.classList.add('bg-blue-100', 'dark:bg-blue-900');
                        const existingCheckIcon = card.querySelector('.fa-check-circle');
                        if (existingCheckIcon) {
                            existingCheckIcon.remove();
                        }
                    }
                });
            }
            
            // Checklist progress
            const checklist = db.get('checklist');
            if (checklist && checklist.items) {
                const completedCount = checklist.items.filter(item => item.completed).length;
                const totalItems = checklist.items.length;
                elements.completedChecklist.textContent = `${completedCount}/${totalItems}`;
                elements.checklistProgress.textContent = `${completedCount}/${totalItems}`;
                
                // Update progress bar
                const checklistProgressPercent = (completedCount / totalItems) * 100;
                elements.checklistProgressBar.style.setProperty('--progress', `${checklistProgressPercent}%`);
                
                // Update checkboxes
                checklist.items.forEach(item => {
                    const checkbox = document.getElementById(item.id);
                    if (checkbox) {
                        checkbox.checked = item.completed;
                    }
                });
            }
            
            // Calculate overall progress
            calculateOverallProgress();
        }

        // Calculate overall progress
        function calculateOverallProgress() {
            const lessons = db.get('lessons');
            const checklist = db.get('checklist');
            
            let progress = 0;
            let totalItems = 0;
            let completedItems = 0;
            
            // Lessons progress (weight: 40%)
            if (lessons && lessons.completed) {
                totalItems += 4; // 4 lessons
                completedItems += lessons.completed.length;
            }
            
            // Checklist progress (weight: 60%)
            if (checklist && checklist.items) {
                totalItems += checklist.items.length * 1.5; // Weighted more
                completedItems += checklist.items.filter(item => item.completed).length * 1.5;
            }
            
            if (totalItems > 0) {
                progress = Math.round((completedItems / totalItems) * 100);
            }
            
            elements.progressPercent.textContent = `${progress}%`;
            elements.progressBar.style.setProperty('--progress', `${progress}%`);
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation buttons
            elements.profileBtn.addEventListener('click', () => showScreen('profile'));
            elements.backBtn.addEventListener('click', () => showScreen(state.previousScreen));
            elements.lessonsBackBtn.addEventListener('click', () => showScreen('home'));
            elements.lessonDetailBackBtn.addEventListener('click', () => showScreen('lessons'));
            elements.checklistBackBtn.addEventListener('click', () => showScreen('home'));
            elements.quizBackBtn.addEventListener('click', () => showScreen('home'));
            elements.quizQuestionsBackBtn.addEventListener('click', () => showScreen('quiz'));
            elements.quizResultsBackBtn.addEventListener('click', () => showScreen('quiz'));
            
            // Bottom navigation
            elements.navHome.addEventListener('click', () => showScreen('home'));
            elements.navLessons.addEventListener('click', () => showScreen('lessons'));
            elements.navChecklist.addEventListener('click', () => showScreen('checklist'));
            elements.navQuiz.addEventListener('click', () => showScreen('quiz'));
            
            // Feature buttons
            elements.lessonsBtn.addEventListener('click', () => showScreen('lessons'));
            elements.checklistBtn.addEventListener('click', () => showScreen('checklist'));
            elements.quizBtn.addEventListener('click', () => showScreen('quiz'));
            
            // Profile screen
            elements.saveProfile.addEventListener('click', saveProfile);
            elements.logoutBtn.addEventListener('click', logout);
            elements.darkModeToggle.addEventListener('change', toggleDarkMode);
            elements.notificationsToggle.addEventListener('change', toggleNotifications);
            
            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // Lesson cards
            elements.lessonCards.forEach(card => {
                card.addEventListener('click', () => {
                    const lessonId = card.getAttribute('data-lesson');
                    showLessonDetail(lessonId);
                });
            });
            
            // Mark lesson complete
            elements.markCompleteBtn.addEventListener('click', markLessonComplete);
            
            // Checklist items
            elements.checklistItems.forEach(checkbox => {
                checkbox.addEventListener('change', updateChecklist);
            });
            
            // Quiz buttons
            elements.startQuizBtn.addEventListener('click', startQuiz);
            elements.nextQuestionBtn.addEventListener('click', nextQuestion);
            elements.submitQuizBtn.addEventListener('click', submitQuiz);
            elements.reviewQuizBtn.addEventListener('click', reviewQuiz);
            elements.retakeQuizBtn.addEventListener('click', retakeQuiz);
        }

        // Show screen with transition
        function showScreen(screen) {
            // Hide current screen
            const currentScreenElement = document.getElementById(`${state.currentScreen}-screen`);
            if (currentScreenElement) {
                currentScreenElement.classList.remove('slide-enter-active');
                currentScreenElement.classList.add('slide-exit-active');
                
                setTimeout(() => {
                    currentScreenElement.classList.add('hidden');
                    currentScreenElement.classList.remove('slide-exit-active');
                }, 300);
            }
            
            // Update state
            if (screen !== state.currentScreen) {
                state.previousScreen = state.currentScreen;
            }
            state.currentScreen = screen;
            
            // Show new screen
            const newScreenElement = document.getElementById(`${screen}-screen`);
            if (newScreenElement) {
                newScreenElement.classList.remove('hidden');
                newScreenElement.classList.add('slide-enter-active');
                
                // Update active nav item
                updateActiveNavItem(screen);
            }
            
            // Special cases
            if (screen === 'quiz') {
                showQuizIntro();
            }
        }

        // Update active nav item
        function updateActiveNavItem(screen) {
            // Reset all nav items
            document.querySelectorAll('[id^="nav-"]').forEach(navItem => {
                navItem.classList.remove('text-blue-600', 'dark:text-blue-400');
                navItem.classList.add('text-gray-500', 'dark:text-gray-400');
            });
            
            // Set active nav item
            let activeNavId;
            switch (screen) {
                case 'home':
                    activeNavId = 'nav-home';
                    break;
                case 'lessons':
                case 'lesson-detail':
                    activeNavId = 'nav-lessons';
                    break;
                case 'checklist':
                    activeNavId = 'nav-checklist';
                    break;
                case 'quiz':
                case 'quiz-questions':
                case 'quiz-results':
                    activeNavId = 'nav-quiz';
                    break;
                default:
                    return;
            }
            
            const activeNavItem = document.getElementById(activeNavId);
            if (activeNavItem) {
                activeNavItem.classList.remove('text-gray-500', 'dark:text-gray-400');
                activeNavItem.classList.add('text-blue-600', 'dark:text-blue-400');
            }
        }

        // Show lesson detail
        function showLessonDetail(lessonId) {
            const lesson = lessonsContent[lessonId];
            if (lesson) {
                state.currentLesson = parseInt(lessonId);
                elements.lessonDetailTitle.textContent = lesson.title;
                elements.lessonDetailContent.innerHTML = lesson.content;
                
                // Check if lesson is already completed
                const lessons = db.get('lessons');
                if (lessons && lessons.completed.includes(state.currentLesson)) {
                    elements.markCompleteBtn.textContent = 'Completed';
                    elements.markCompleteBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    elements.markCompleteBtn.classList.add('bg-green-600', 'hover:bg-green-700');
                    elements.markCompleteBtn.disabled = true;
                } else {
                    elements.markCompleteBtn.textContent = 'Mark as Complete';
                    elements.markCompleteBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                    elements.markCompleteBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
                    elements.markCompleteBtn.disabled = false;
                }
                
                showScreen('lesson-detail');
            }
        }

        // Mark lesson as complete
        function markLessonComplete() {
            const lessons = db.get('lessons');
            if (lessons && state.currentLesson) {
                if (!lessons.completed.includes(state.currentLesson)) {
                    lessons.completed.push(state.currentLesson);
                    db.set('lessons', lessons);
                    
                    // Update UI
                    elements.markCompleteBtn.textContent = 'Completed';
                    elements.markCompleteBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    elements.markCompleteBtn.classList.add('bg-green-600', 'hover:bg-green-700');
                    elements.markCompleteBtn.disabled = true;
                    
                    loadProgressData(); // Reload progress to update stats and lesson card
                }
            }
        }

        // Save profile data
        function saveProfile() {
            const user = db.get('user');
            if (user) {
                user.name = elements.nameInput.value;
                user.email = elements.emailInput.value;
                user.occupation = elements.occupationInput.value;
                db.set('user', user);
                loadUserData(); // Update displayed profile info
                alert('Profile saved successfully!');
            }
        }

        // Logout function (resets user data and reloads app)
        function logout() {
            if (confirm('Are you sure you want to log out? This will reset your progress.')) {
                db.remove('user');
                db.remove('lessons');
                db.remove('checklist');
                db.remove('quiz');
                location.reload(); // Reload the page to reset the app
            }
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const user = db.get('user');
            if (user) {
                user.darkMode = elements.darkModeToggle.checked;
                db.set('user', user);
                checkDarkMode();
            }
        }

        // Apply dark mode based on user setting
        function checkDarkMode() {
            const user = db.get('user');
            if (user && user.darkMode) {
                document.body.classList.add('dark');
                elements.themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.body.classList.remove('dark');
                elements.themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        // Toggle theme (used by header button)
        function toggleTheme() {
            const user = db.get('user');
            if (user) {
                user.darkMode = !user.darkMode;
                db.set('user', user);
                checkDarkMode();
            }
        }

        // Toggle notifications
        function toggleNotifications() {
            const user = db.get('user');
            if (user) {
                user.notifications = elements.notificationsToggle.checked;
                db.set('user', user);
                // Implement actual notification logic here if needed
                alert(`Notifications are now ${user.notifications ? 'enabled' : 'disabled'}.`);
            }
        }

        // Update checklist item status
        function updateChecklist(event) {
            const checklist = db.get('checklist');
            const itemId = event.target.id;
            const isChecked = event.target.checked;
            
            const itemIndex = checklist.items.findIndex(item => item.id === itemId);
            if (itemIndex !== -1) {
                checklist.items[itemIndex].completed = isChecked;
                db.set('checklist', checklist);
                loadProgressData(); // Reload progress to update stats and progress bar
            }
        }

        // Show quiz intro screen
        function showQuizIntro() {
            elements.quizContent.innerHTML = `
                <div class="text-center py-8">
                    <i class="fas fa-question-circle text-5xl text-purple-500 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Test Your Knowledge</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6">Take this quiz to assess your understanding of occupational health and safety in computer system servicing.</p>
                    <button id="start-quiz-btn" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        Start Quiz
                    </button>
                </div>
            `;
            document.getElementById('start-quiz-btn').addEventListener('click', startQuiz);
        }

        // Start the quiz
        function startQuiz() {
            state.quiz.currentQuestion = 0;
            state.quiz.userAnswers = [];
            state.quiz.started = true;
            showScreen('quiz-questions');
            loadQuestion();
        }

        // Load a quiz question
        function loadQuestion() {
            const currentQ = quizQuestions[state.quiz.currentQuestion];
            if (currentQ) {
                elements.questionNumber.textContent = state.quiz.currentQuestion + 1;
                elements.quizQuestion.textContent = currentQ.question;
                elements.quizOptions.innerHTML = ''; // Clear previous options
                
                currentQ.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'flex items-center';
                    optionDiv.innerHTML = `
                        <input type="radio" id="option-${index}" name="quiz-option" value="${index}" class="custom-checkbox mr-3">
                        <label for="option-${index}" class="text-gray-700 dark:text-gray-300">${option}</label>
                    `;
                    elements.quizOptions.appendChild(optionDiv);
                    
                    // Pre-select if already answered
                    if (state.quiz.userAnswers[state.quiz.currentQuestion] === index) {
                        document.getElementById(`option-${index}`).checked = true;
                    }
                });

                // Show/hide next/submit buttons
                if (state.quiz.currentQuestion < quizQuestions.length - 1) {
                    elements.nextQuestionBtn.classList.remove('hidden');
                    elements.submitQuizBtn.classList.add('hidden');
                } else {
                    elements.nextQuestionBtn.classList.add('hidden');
                    elements.submitQuizBtn.classList.remove('hidden');
                }
            } else {
                submitQuiz(); // If somehow no more questions, submit
            }
        }

        // Move to the next question
        function nextQuestion() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            if (selectedOption) {
                state.quiz.userAnswers[state.quiz.currentQuestion] = parseInt(selectedOption.value);
                state.quiz.currentQuestion++;
                loadQuestion();
            } else {
                alert('Please select an answer before proceeding.');
            }
        }

        // Submit the quiz
        function submitQuiz() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            if (selectedOption) {
                state.quiz.userAnswers[state.quiz.currentQuestion] = parseInt(selectedOption.value);
            } else {
                alert('Please select an answer before submitting.');
                return;
            }

            let correctCount = 0;
            quizQuestions.forEach((q, index) => {
                if (state.quiz.userAnswers[index] === q.correctAnswer) {
                    correctCount++;
                }
            });

            const score = (correctCount / quizQuestions.length) * 100;
            db.set('quiz', {
                lastScore: score,
                lastAttempt: new Date().toISOString()
            });

            elements.quizScore.textContent = `${Math.round(score)}%`;
            elements.correctAnswers.textContent = `${correctCount}/${quizQuestions.length}`;
            elements.quizProgressBar.style.setProperty('--progress', `${score}%`);

            if (score >= 70) { // Example pass mark
                elements.quizResultTitle.textContent = 'Good Job!';
                elements.quizResultDescription.textContent = 'You have a good understanding of occupational health and safety procedures.';
                elements.quizProgressBar.classList.remove('bg-red-600');
                elements.quizProgressBar.classList.add('bg-green-600');
                elements.quizScore.classList.remove('text-red-600', 'dark:text-red-300');
                elements.quizScore.classList.add('text-green-600', 'dark:text-green-300');
            } else {
                elements.quizResultTitle.textContent = 'Needs Improvement';
                elements.quizResultDescription.textContent = 'Review the lessons to improve your understanding.';
                elements.quizProgressBar.classList.remove('bg-green-600');
                elements.quizProgressBar.classList.add('bg-red-600');
                elements.quizScore.classList.remove('text-green-600', 'dark:text-green-300');
                elements.quizScore.classList.add('text-red-600', 'dark:text-red-300');
            }

            showScreen('quiz-results-screen');
        }

        // Review quiz answers (placeholder)
        function reviewQuiz() {
            alert('Review Answers functionality not yet implemented.');
            // You would typically navigate to a screen showing questions, user answers, and correct answers.
        }

        // Retake quiz
        function retakeQuiz() {
            startQuiz();
        }

        // Call initApp when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</html>
